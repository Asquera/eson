#!/usr/bin/env ruby

$LOAD_PATH << File.join(File.dirname(File.dirname(__FILE__)), "lib")

require 'echolon-http'
require 'echolon-search'
require 'echolon-types'

require 'elsearch-node'

require 'node/external'

require 'rest-client'
require 'addressable/template'

require 'pry'

node = ElasticSearch::Node::External.new

c = ElasticSearch::Client.new(:server => "http://#{node.ip}:#{node.port}", 
                              :protocol => ElasticSearch::HTTP, 
                              :plugins => [ElasticSearch::QueryPlugin, ElasticSearch::ResponseParser], 
                              :logger => Logger.new($stdout))

at_exit do
  node.close  
end

c.pry